%br/
- errors = flash[:errors]
- if credit_card_errors?(errors, attr_sym)
  .has-error
    = render partial: 'credit_card_field', 
      locals: {f: f, attrs: attrs, attr_sym: attr_sym}
    %span.help-block
      = credit_card_errors_list(errors, attr_sym)

- elsif attr_sym == :number && card_number_errors?(errors)
  .has-error
    = render partial: 'credit_card_field', 
      locals: {f: f, attrs: attrs, attr_sym: attr_sym}
    %span.help-block
      = card_number_errors_list(errors)

- elsif is_exp_year_or_month?(attr_sym) && card_date_errors?(errors)
  .has-error
    = render partial: 'credit_card_field', 
      locals: {f: f, attrs: attrs, attr_sym: attr_sym}
    %span.help-block
      = card_date_errors_list(errors)

- else
  %div
    = render partial: 'credit_card_field', 
      locals: {f: f, attrs: attrs, attr_sym: attr_sym}